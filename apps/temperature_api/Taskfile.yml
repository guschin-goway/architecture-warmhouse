version: '3'

tasks:
  generate-api:
    cmds:
      - go run github.com/oapi-codegen/oapi-codegen/v2/cmd/oapi-codegen -package api -generate types,server,spec ./contracts/openapi.yaml > ./internal/transport/http/api/api.gen.go

  staticcheck:
    cmds:
      - docker run --rm -v $(pwd):/app -w /app golang:1.25 sh -c "go install honnef.co/go/tools/cmd/staticcheck@latest && staticcheck -f stylish ./..."
    silent: false