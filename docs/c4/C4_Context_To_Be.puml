@startuml
!includeurl https://raw.githubusercontent.com/plantuml-stdlib/C4-PlantUML/master/C4_Context.puml

LAYOUT_TOP_DOWN()

Person(user, "Пользователь", "Владелец дома. Самостоятельно подключает устройства, управляет отоплением, освещением, воротами и наблюдением")
Person(support, "Служба поддержки", "Помогает пользователям при возникновении проблем")
Person(marketing, "Маркетинг и продажи", "Продвигает новые комплекты умного дома")

System_Boundary(cloud, "Облачная экосистема WarmHouse") {
  System(saas, "Платформа WarmHouse (SaaS)", "Управление умным домом по модели самообслуживания")
  System_Ext(auth, "Сервис аутентификации", "Регистрация и авторизация пользователей")
  System_Ext(payment, "Сервис платежей", "Оплата модулей и подписки")
}

System_Ext(devices, "Устройства умного дома", "Датчики и реле отопления, освещения, ворот, камеры и др. по стандартным протоколам")

Rel(user, saas, "Управляет устройствами, настраивает сценарии", "Веб/Мобильное приложение (HTTPS)")
Rel(user, auth, "Регистрируется и входит в систему", "JWT")
Rel(user, payment, "Оплачивает подписку и устройства", "HTTPS")

Rel(support, saas, "Поддержка пользователей", "Админ-интерфейс")
Rel(marketing, saas, "Загрузка информации о продуктах и акциях", "Админ-интерфейс")

Rel(saas, devices, "Обмен данными и управление", "HTTP")
Rel(saas, auth, "Использует для авторизации пользователей")
Rel(saas, payment, "Обработка платежей и биллинга")

@enduml
